{"version":3,"file":"index.js","sources":["../src/utils.js","../src/historyStack.js","../src/helper.js","../src/index.js","../src/extension.js"],"sourcesContent":["export const isDef = function (v) {\n  return v !== undefined && v !== null;\n};\nconst PLACEHOLDER_VM = {\n  __placeholder: true,\n};\nexport const resolvePushedVm = (currentVm) => {\n  if (!isDef(currentVm)) {\n    return undefined;\n  }\n  return !currentVm.$vnode.data.keepAlive ? PLACEHOLDER_VM : currentVm;\n};\nexport const isPlaceHolderVm = (vm) => vm && !!vm.__placeholder;\n\nexport const getStateId = function () {\n  const state = getCurrentState();\n  return isDef(state) ? state.id : undefined;\n};\n\nexport const getQuery = function (params) {\n  let query = \"\";\n  query = Object.keys(params)\n    .map(\n      (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n    )\n    .join(\"&\");\n  if (query.length > 0) {\n    query = `?${query}`;\n  }\n  return query;\n};\nconst getCurrentState = function () {\n  return history.state;\n};\n\nexport const genKey = function (num, router) {\n  return `keep-alive-vnode-key${Number(num)}${router.history.current.path}`;\n};\nexport const getCurrentVM = function (router) {\n  return router.history.current.matched.length > 0\n    ? router.history.current.matched[0].instances.default\n    : undefined;\n};\nexport const setCurrentVnodeKey = function (router, key) {\n  const current = getCurrentVM(router);\n  if (current && current._vnode) {\n    current._vnode.parent.key = key;\n  }\n};\nexport const replaceFirstKeyAndCache = function (vm, key) {\n  if (!isDef(vm) || !isDef(vm.cache) || !isDef(vm.keys)) {\n    return;\n  }\n  const keys = vm.keys;\n  const cache = vm.cache;\n  if (keys.length === 1) {\n    const vnode = cache[keys[0]];\n    delete cache[keys[0]];\n    keys.splice(0, 1);\n    keys.push(key);\n    cache[key] = vnode;\n  }\n};\nexport const getFirstComponentChild = function (children) {\n  if (Array.isArray(children)) {\n    for (let i = 0; i < children.length; i++) {\n      const c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c;\n      }\n    }\n  }\n};\nconst isAsyncPlaceholder = function (node) {\n  return node.isComment && node.asyncFactory;\n};\n\nexport const replaceState = function (mode, router, id) {\n  let path =\n    window.location.pathname + (mode === \"hash\" ? window.location.hash : \"\");\n  let query = getQuery(router.history.current.query);\n  path = path + query;\n  let state = isDef(history.state) ? history.state : {};\n  state[\"id\"] = id;\n  // optimize file:// URL\n  const isFilSys = window.location.href.startsWith(\"file://\");\n  history.replaceState(state, \"\", isFilSys ? null : path);\n};\n\nexport const inBrowser = typeof window !== 'undefined';","export default class HistoryStack {\n  constructor() {\n    this.historyStackMap = [];\n  }\n  push(vm, index) {\n    // const cur = stackPointer();\n    const stack = this.historyStackMap[index];\n    if (Array.isArray(stack)) {\n      !stack.includes(vm) && stack.push(vm);\n      this.historyStackMap[index] = stack.filter((item) => !item._isDestroyed);\n    } else {\n      const vms = [];\n      vms.push(vm);\n      this.historyStackMap[index] = vms;\n    }\n  }\n  pop() {\n    const last = this.historyStackMap.pop();\n    Array.isArray(last) &&\n      last.forEach(\n        (vm) => vm && vm.$keepAliveDestroy && vm.$keepAliveDestroy()\n      );\n  }\n  removeGreater(index) {\n    while (this.historyStackMap.length >= index) {\n      this.pop();\n    }\n  }\n  clear() {\n    this.historyStackMap = [];\n  }\n}\n","import {\n  getCurrentVM,\n  isDef,\n  getStateId,\n  resolvePushedVm,\n  genKey,\n  replaceFirstKeyAndCache,\n  getFirstComponentChild,\n  isPlaceHolderVm,\n  setCurrentVnodeKey,\n  replaceState,\n} from \"./utils\";\nimport HistoryStack from \"./historyStack\";\n\nexport default class VueRouterKeepAliveHelper{\n  constructor({ Vue, router, replaceStay }) {\n    this.Vue = Vue;\n    this.router = router;\n    this.router._stack = 0;\n    this.mode = router.mode; // hash or history\n    this.historyShouldChange = false;\n    this.isReplace = false;\n    this.replacePrePath = undefined;\n    this.preStateId = 0;\n    this.pre = null;\n    this.replaceStay = replaceStay || [];\n    this.hacked = false;\n    this.historyStack = new HistoryStack();\n    this.init();\n  }\n  init() {\n    this.routerHooks();\n    this.hackRouter();\n  }\n  /**\n   * use afterEach hook to set state.key and add the reference of vm to the historyStack\n   */\n  routerHooks() {\n    const router = this.router;\n    router.afterEach((to, from) => {\n      this.historyShouldChange = true;\n      // get the vm instance after render\n      this.Vue.nextTick(() => {\n        const current = this.currentVm;\n        const pendingToPushVm = resolvePushedVm(current);\n        if (this.pre === null) {\n          this.onInitial(pendingToPushVm);\n        } else if (this.isReplace) {\n          this.onReplace(pendingToPushVm);\n        } else if (this.isPush) {\n          this.onPush(pendingToPushVm);\n        } else {\n          this.onBack(pendingToPushVm);\n        }\n        this.pre = current;\n        this.preStateId = this.stackPointer;\n        if (!isPlaceHolderVm(pendingToPushVm)) {\n          setCurrentVnodeKey(router, genKey(this.stackPointer, router));\n          if (!this.hacked && current) {\n            this.hackKeepAliveRender(current.$vnode.parent.componentInstance);\n          }\n          this.historyShouldChange = false;\n        }\n      });\n    });\n  }\n  /**\n   * @description hack router go , replace and push functions to tell replace from back and push\n   */\n  hackRouter() {\n    const router = this.router;\n    const rtmp = router.replace;\n    const rtmpf = (location, onComplete, onAbort) => {\n      this.isReplace = true;\n      this.replacePrePath = router.history.current.path;\n      rtmp.call(router, location, onComplete, (e) => {\n        this.isReplace = false;\n        this.replacePrePath = undefined;\n        isDef(onAbort) && onAbort(e);\n      });\n    };\n    router.replace = function (ocation, onComplete, onAbort) {\n      rtmpf(ocation, onComplete, onAbort);\n    };\n\n    const gstmp = router.go;\n    const gstmpf = (number) => {\n      this.isReplace = false;\n      return gstmp.call(router, number);\n    };\n    router.go = function (num) {\n      return gstmpf(num);\n    };\n    const pstmp = router.push;\n    const pstmpf = (location, onComplete, onAbort) => {\n      this.isReplace = false;\n      if (!onComplete && !onAbort && typeof Promise !== \"undefined\") {\n        return pstmp.call(router, location, onComplete, onAbort);\n      } else {\n        pstmp.call(router, location, onComplete, onAbort);\n      }\n    };\n    router.push = function (location, onComplete, onAbort) {\n      return pstmpf(location, onComplete, onAbort);\n    };\n  }\n  /**\n   * @description hack the render function of keep-alive component, modify the key of vnode for cache\n   * @param {*} vm keep-alive component instance\n   */\n  hackKeepAliveRender(vm) {\n    // modify the first keep alive key and cache\n    replaceFirstKeyAndCache(vm, genKey(this.stackPointer, this.router));\n\n    const tmp = vm.$options.render;\n    const self = this;\n    const router = this.router;\n    vm.$options.render = function () {\n      const slot = this.$slots.default;\n      const vnode = getFirstComponentChild(slot); // vnode is a keep-alive-component-vnode\n      if (self.historyShouldChange) {\n        if (vnode && !isDef(vnode.key)) {\n          if (self.isReplace) {\n            vnode.key = genKey(self.stackPointer, router);\n          } else if (self.isPush) {\n            vnode.key = genKey(self.stackPointer + 1, router);\n          } else {\n            vnode.key = genKey(self.stackPointer - 1, router);\n          }\n        }\n      } else {\n        // when historyShouldChange is false should rerender only, should not create new vm ,use the same vnode.key issue#7\n        vnode.key = genKey(self.stackPointer, router);\n      }\n      return tmp.apply(this, arguments);\n    };\n    this.hacked = true;\n  }\n  /**********  callback functions ************/\n  onInitial(vm) {\n    const currentStateId = getStateId();\n    if (isDef(currentStateId)) {\n      this.setStackPointer(currentStateId);\n    } else {\n      this.setState(0);\n    }\n    this.historyStack.push(vm, this.stackPointer);\n  }\n  onPush(vm) {\n    this.setState(this.increaseStackPointer());\n    this.historyStack.push(vm, this.stackPointer);\n  }\n  onBack(vm) {\n    this.historyStack.pop();\n    this.decreaseStackPointer();\n    this.historyStack.push(vm, this.stackPointer);\n  }\n  onReplace(vm) {\n    const shouldDestroy = !(\n      isDef(this.replacePrePath) &&\n      this.replaceStay.includes(this.replacePrePath)\n    );\n    if (shouldDestroy) {\n      this.pre.$keepAliveDestroy();\n    }\n    this.setState(this.stackPointer);\n    this.historyStack.push(vm, this.stackPointer);\n    this.isReplace = false;\n    this.replacePrePath = undefined;\n  }\n  get currentVm() {\n    return getCurrentVM(this.router);\n  }\n  get isPush() {\n    if (!this.isReplace) {\n      const stateId = getStateId();\n      return !isDef(stateId) || this.preStateId <= stateId;\n    }\n    return false;\n  }\n  get stackPointer() {\n    return this.router._stack;\n  }\n  setState(id) {\n    this.setStackPointer(id);\n    replaceState(this.mode, this.router, id);\n  }\n  setStackPointer(val) {\n    this.router._stack = val;\n  }\n  increaseStackPointer() {\n    return (this.router._stack += 1);\n  }\n  decreaseStackPointer() {\n    return (this.router._stack -= 1);\n  }\n}\n","import Helper from \"./helper\";\nimport { extendVue, extendHistory } from \"./extension\";\nimport { inBrowser } from \"./utils\";\n\nlet singleton = undefined;\n// TODO: 1. abstract mode support\nexport default function createHelper(config) {\n  if (config.Vue === undefined || config.router === undefined) {\n    console.warn(\n      \"warning: router helper needs Vue and root router ,see more for guide : https://github.com/Zippowxk/vue-router-keep-alive-helper\"\n    );\n    return;\n  }\n  if(singleton) {\n    return singleton;\n  }\n  if (inBrowser) {\n    extendHistory(window.history);\n  }\n  extendVue(config.Vue);\n  return (singleton = new Helper(config));\n}","import { isDef } from \"./utils\";\n\nexport function extendHistory(history) {\n  const rstmp = history.replaceState;\n  history.replaceState = function (state, op, path) {\n    const old = Object.assign({}, history.state);\n    const s = Object.assign(old, state);\n    rstmp.call(history, s, op, path);\n  }\n  const historyPushState = history.pushState;\n  history.pushState = function (state, op, path) {\n    const old = Object.assign({}, history.state);\n    const s = Object.assign(old, state);\n    historyPushState.call(history, s, op, path);\n  }\n}\n\nexport function extendVue(Vue) {\n  const dtmp = Vue.prototype.$destroy;\n  /**\n   * @description remove the cache in <keep-alive> component before invoke $destroy\n   */\n  Vue.prototype.$keepAliveDestroy = function () {\n    if (this.$vnode && this.$vnode.data.keepAlive) {\n      if (\n        this.$vnode.parent &&\n        this.$vnode.parent.componentInstance &&\n        this.$vnode.parent.componentInstance.cache\n      ) {\n        if (this.$vnode.componentOptions) {\n          const key = !isDef(this.$vnode.key)\n            ? this.$vnode.componentOptions.Ctor.cid +\n              (this.$vnode.componentOptions.tag\n                ? `::${this.$vnode.componentOptions.tag}`\n                : \"\")\n            : this.$vnode.key;\n          const cache = this.$vnode.parent.componentInstance.cache;\n          const keys = this.$vnode.parent.componentInstance.keys;\n          if (cache[key]) {\n            if (keys.length) {\n              const index = keys.indexOf(key);\n              if (index > -1) {\n                keys.splice(index, 1);\n              }\n            }\n            delete cache[key];\n          }\n        }\n      }\n    }\n    dtmp.apply(this, arguments);\n  };\n}\n"],"names":["isDef","v","PLACEHOLDER_VM","__placeholder","getStateId","state","getCurrentState","id","undefined","history","genKey","num","router","Number","current","path","getCurrentVM","matched","length","instances","default","getFirstComponentChild","children","Array","isArray","i","c","componentOptions","isAsyncPlaceholder","node","isComment","asyncFactory","replaceState","mode","window","location","pathname","hash","params","query","Object","keys","map","key","encodeURIComponent","join","getQuery","isFilSys","href","startsWith","inBrowser","HistoryStack","historyStackMap","push","vm","index","stack","this","includes","filter","item","_isDestroyed","vms","pop","last","forEach","$keepAliveDestroy","removeGreater","clear","VueRouterKeepAliveHelper","Vue","replaceStay","_stack","historyShouldChange","isReplace","replacePrePath","preStateId","pre","hacked","historyStack","init","routerHooks","hackRouter","afterEach","to","from","_this","nextTick","currentVm","pendingToPushVm","$vnode","data","keepAlive","resolvePushedVm","onInitial","onReplace","isPush","onPush","onBack","stackPointer","_vnode","parent","setCurrentVnodeKey","hackKeepAliveRender","componentInstance","rtmp","replace","ocation","onComplete","onAbort","_this2","call","e","rtmpf","gstmp","go","number","pstmp","Promise","pstmpf","cache","vnode","splice","replaceFirstKeyAndCache","tmp","$options","render","self","slot","$slots","apply","arguments","currentStateId","setStackPointer","setState","increaseStackPointer","decreaseStackPointer","val","stateId","singleton","config","dtmp","rstmp","op","old","assign","s","historyPushState","pushState","extendHistory","prototype","$destroy","Ctor","cid","tag","indexOf","Helper","console","warn"],"mappings":"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"}